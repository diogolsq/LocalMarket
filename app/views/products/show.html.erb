<%= link_to "go back to products", products_path %>



<div class="product-show-container col-12">

  <div class="product-details d-flex col-12">
    <div class="product-img"></div>
    <div class="product-info"> </div>
  </div>

  <div class="reviews-container">

  </div>
</div>

























<h2>Name: <%= @product.name%></h2>
<p>Price: <%= @product.price  %></p>
<%# link to seller's profile %>
<p> Seller: <%= link_to "#{@user.name}", user_path(@user) %>
<%# description %>
<p>Description: <%= @product.description %></p>
<%#Stock logic%>
<% if @product.stock == 0 %>
  <p> sold out <p>
<% else %>
  <p>Stock: <%= @product.stock %></p>
<% end %>
<%# stock logic end%>


<%# New Review %>
<%= link_to "New Review", new_product_review_path(@product.id) %>

<%# rating average logic %>
<% sum_of_ratings = 0 %>
<% @product.reviews.each do |review| %>
  <% sum_of_ratings += review.rating %>
<% end %>
<% if @product.reviews.count == 0 %>
  <p> This product has not been reviewed <p>
<% else %>
  <p>Average Rating: <%= "#{sum_of_ratings/@product.reviews.count} Reviews made: #{@product.reviews.count}" %></p>
<% end %>
<%# rating average logic end %>

<% # listing reviews logic %>
<% @product.reviews.each do |review| %>
  <% if review.description != "" %>
    <p><%= " #{review.description} #{review.rating} #{review.created_at} " %><p>
  <% end %>
<% end %>
<% # listing reviews logic end %>

<% # Add to cart logic and form %>
<%= simple_form_for OrdersToProduct.new do |f| %>
  <%= f.input :product_id, as: :hidden, input_html: {value: @product.id} %>
  <%= f.input :quantity, collection: (1..10) %>
  <%= f.submit "Add to cart" %>
<% end %>





